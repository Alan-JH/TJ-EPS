EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr USLegal 14000 8500
encoding utf-8
Sheet 2 30
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Sheet
S 10400 1200 550  250 
U 61C40A6C
F0 "Cell1" 50
F1 "Cell.sch" 50
F2 "-" I R 10950 1350 50 
F3 "+" I R 10950 1250 50 
$EndSheet
$Sheet
S 11350 1200 550  250 
U 61C444F3
F0 "Cell2" 50
F1 "Cell.sch" 50
F2 "-" I L 11350 1350 50 
F3 "+" I L 11350 1250 50 
$EndSheet
$Sheet
S 10400 1700 550  250 
U 61C44BC0
F0 "Cell3" 50
F1 "Cell.sch" 50
F2 "-" I R 10950 1850 50 
F3 "+" I R 10950 1750 50 
$EndSheet
$Sheet
S 11350 1700 550  250 
U 61C44F8A
F0 "Cell4" 50
F1 "Cell.sch" 50
F2 "-" I L 11350 1850 50 
F3 "+" I L 11350 1750 50 
$EndSheet
Wire Wire Line
	10950 1250 11150 1250
Wire Wire Line
	10950 1350 11150 1350
Wire Wire Line
	10950 1750 11150 1750
Wire Wire Line
	10950 1850 11150 1850
Wire Wire Line
	11150 1350 11150 1550
Connection ~ 11150 1350
Wire Wire Line
	11150 1350 11350 1350
Connection ~ 11150 1750
Wire Wire Line
	11150 1750 11350 1750
$Comp
L symbols:BQ2920 U?
U 1 1 61C4D2D4
P 9300 1100
F 0 "U?" H 9300 1265 50  0000 C CNN
F 1 "BQ29209" H 9300 1174 50  0000 C CNN
F 2 "" H 9300 1100 50  0001 C CNN
F 3 "" H 9300 1100 50  0001 C CNN
	1    9300 1100
	-1   0    0    -1  
$EndComp
Wire Wire Line
	11150 1250 11150 800 
Connection ~ 11150 1250
Wire Wire Line
	11150 1250 11350 1250
Wire Wire Line
	11150 2250 9800 2250
Wire Wire Line
	11150 1850 11150 2250
Connection ~ 11150 1850
Wire Wire Line
	11150 1850 11350 1850
Connection ~ 9800 2250
Wire Wire Line
	9800 1950 9700 1950
Wire Wire Line
	10300 1550 11150 1550
Connection ~ 11150 1550
Wire Wire Line
	11150 1550 11150 1750
$Comp
L Device:R R?
U 1 1 61C52C21
P 10100 1500
F 0 "R?" V 10000 1500 50  0000 C CNN
F 1 "260R" V 10100 1500 50  0000 C CNN
F 2 "" V 10030 1500 50  0001 C CNN
F 3 "~" H 10100 1500 50  0001 C CNN
	1    10100 1500
	0    1    1    0   
$EndComp
$Comp
L Device:R R?
U 1 1 61C5354F
P 10100 1800
F 0 "R?" V 10000 1800 50  0000 C CNN
F 1 "100R" V 10100 1800 50  0000 C CNN
F 2 "" V 10030 1800 50  0001 C CNN
F 3 "~" H 10100 1800 50  0001 C CNN
	1    10100 1800
	0    1    1    0   
$EndComp
$Comp
L Device:C C?
U 1 1 61C54151
P 9800 1650
F 0 "C?" H 9800 1750 50  0000 L CNN
F 1 "0.1uF" H 9800 1550 50  0000 L CNN
F 2 "" H 9838 1500 50  0001 C CNN
F 3 "~" H 9800 1650 50  0001 C CNN
	1    9800 1650
	1    0    0    -1  
$EndComp
$Comp
L Device:C C?
U 1 1 61C563DF
P 9800 1350
F 0 "C?" H 9800 1450 50  0000 L CNN
F 1 "0.1uF" H 9800 1250 50  0000 L CNN
F 2 "" H 9838 1200 50  0001 C CNN
F 3 "~" H 9800 1350 50  0001 C CNN
	1    9800 1350
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 61C57BD4
P 10100 1200
F 0 "R?" V 10000 1200 50  0000 C CNN
F 1 "160R" V 10100 1200 50  0000 C CNN
F 2 "" V 10030 1200 50  0001 C CNN
F 3 "~" H 10100 1200 50  0001 C CNN
	1    10100 1200
	0    1    1    0   
$EndComp
Wire Wire Line
	10300 1550 10300 1500
Wire Wire Line
	10300 1500 10250 1500
Wire Wire Line
	10300 1500 10300 1200
Wire Wire Line
	10300 1200 10250 1200
Connection ~ 10300 1500
Wire Wire Line
	10300 1550 10300 1800
Wire Wire Line
	10300 1800 10250 1800
Connection ~ 10300 1550
Wire Wire Line
	9950 1800 9800 1800
Wire Wire Line
	9950 1500 9800 1500
Connection ~ 9800 1500
Wire Wire Line
	9800 1500 9700 1500
Wire Wire Line
	9700 1800 9800 1800
Connection ~ 9800 1800
Wire Wire Line
	9950 1200 9800 1200
Connection ~ 9800 1200
Wire Wire Line
	9800 1200 9700 1200
Wire Wire Line
	8900 1700 8800 1700
Wire Wire Line
	8800 1700 8800 1950
Wire Wire Line
	8800 2250 9300 2250
Wire Wire Line
	9300 2250 9300 2200
Connection ~ 9300 2250
Wire Wire Line
	9300 2250 9800 2250
Wire Wire Line
	8900 1950 8800 1950
Connection ~ 8800 1950
Wire Wire Line
	8800 1950 8800 2250
$Comp
L Device:R R?
U 1 1 61C6186E
P 8450 1150
F 0 "R?" H 8500 1150 50  0000 L CNN
F 1 "100R" V 8450 1150 50  0000 C CNN
F 2 "" V 8380 1150 50  0001 C CNN
F 3 "~" H 8450 1150 50  0001 C CNN
	1    8450 1150
	1    0    0    -1  
$EndComp
Wire Wire Line
	8450 800  8450 1000
Wire Wire Line
	8450 800  11150 800 
Wire Wire Line
	8450 1300 8450 1450
Wire Wire Line
	8450 2250 8800 2250
Connection ~ 8800 2250
Wire Wire Line
	8450 1450 8900 1450
Connection ~ 8450 2250
$Comp
L Transistor_FET:Si4162DY Q?
U 1 1 61C81D99
P 8000 1400
F 0 "Q?" H 8205 1446 50  0000 L CNN
F 1 "Si4186DY" H 8205 1355 50  0000 L CNN
F 2 "Package_SO:SOIC-8_3.9x4.9mm_P1.27mm" H 8200 1300 50  0001 L CNN
F 3 "http://www.vishay.com/docs/68967/si4162dy.pdf" H 8000 1400 50  0001 L CNN
	1    8000 1400
	-1   0    0    -1  
$EndComp
Wire Wire Line
	7900 1600 7900 2250
Connection ~ 8450 800 
Wire Wire Line
	8200 1400 8600 1400
Wire Wire Line
	8600 1400 8600 1200
$Comp
L power:+BATT #PWR0110
U 1 1 61C9DAF5
P 8450 800
F 0 "#PWR0110" H 8450 650 50  0001 C CNN
F 1 "+BATT" H 8465 973 50  0000 C CNN
F 2 "" H 8450 800 50  0001 C CNN
F 3 "" H 8450 800 50  0001 C CNN
	1    8450 800 
	1    0    0    -1  
$EndComp
$Comp
L power:-BATT #PWR0111
U 1 1 61C9E3C6
P 8450 2250
F 0 "#PWR0111" H 8450 2100 50  0001 C CNN
F 1 "-BATT" H 8465 2423 50  0000 C CNN
F 2 "" H 8450 2250 50  0001 C CNN
F 3 "" H 8450 2250 50  0001 C CNN
	1    8450 2250
	-1   0    0    1   
$EndComp
$Comp
L Device:R R?
U 1 1 61CA0763
P 8750 1200
F 0 "R?" V 8850 1150 50  0000 L CNN
F 1 "1K" V 8750 1200 50  0000 C CNN
F 2 "" V 8680 1200 50  0001 C CNN
F 3 "~" H 8750 1200 50  0001 C CNN
	1    8750 1200
	0    -1   -1   0   
$EndComp
$Comp
L Transistor_FET:Si4162DY Q?
U 1 1 61CA8657
P 4000 2150
F 0 "Q?" V 4250 2150 50  0000 C CNN
F 1 "Si4186DY" V 4350 2150 50  0000 C CNN
F 2 "Package_SO:SOIC-8_3.9x4.9mm_P1.27mm" H 4200 2050 50  0001 L CNN
F 3 "http://www.vishay.com/docs/68967/si4162dy.pdf" H 4000 2150 50  0001 L CNN
	1    4000 2150
	0    1    1    0   
$EndComp
Wire Wire Line
	3800 2250 3550 2250
$Comp
L power:GND #PWR0112
U 1 1 61CB5F66
P 3400 2250
F 0 "#PWR0112" H 3400 2000 50  0001 C CNN
F 1 "GND" H 3405 2077 50  0000 C CNN
F 2 "" H 3400 2250 50  0001 C CNN
F 3 "" H 3400 2250 50  0001 C CNN
	1    3400 2250
	1    0    0    -1  
$EndComp
$Comp
L Transistor_FET:IRF7404 Q?
U 1 1 61CBAA03
P 4000 900
F 0 "Q?" V 4342 900 50  0000 C CNN
F 1 "IRF7425" V 4251 900 50  0000 C CNN
F 2 "Package_SO:SOIC-8_3.9x4.9mm_P1.27mm" H 4200 825 50  0001 L CIN
F 3 "http://www.infineon.com/dgdl/irf7404.pdf?fileId=5546d462533600a4015355fa2b5b1b9e" V 4000 900 50  0001 L CNN
	1    4000 900 
	0    1    -1   0   
$EndComp
Wire Wire Line
	3800 800  3550 800 
$Comp
L Device:R R?
U 1 1 61CCB0E6
P 3550 2100
F 0 "R?" H 3600 2100 50  0000 L CNN
F 1 "10K" V 3550 2100 50  0000 C CNN
F 2 "" V 3480 2100 50  0001 C CNN
F 3 "~" H 3550 2100 50  0001 C CNN
	1    3550 2100
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 61CCB827
P 3550 950
F 0 "R?" H 3600 950 50  0000 L CNN
F 1 "10K" V 3550 950 50  0000 C CNN
F 2 "" V 3480 950 50  0001 C CNN
F 3 "~" H 3550 950 50  0001 C CNN
	1    3550 950 
	1    0    0    -1  
$EndComp
Connection ~ 3550 2250
Connection ~ 3550 800 
Wire Wire Line
	3550 800  3400 800 
Wire Wire Line
	3550 1100 3550 1350
Wire Wire Line
	3550 1950 3550 1700
$Comp
L Switch:SW_SPST SW?
U 1 1 61CF7D80
P 3800 1250
F 0 "SW?" H 3800 1150 50  0000 C CNN
F 1 "INHIBIT3" H 3800 1350 50  0000 C CNN
F 2 "" H 3800 1250 50  0001 C CNN
F 3 "~" H 3800 1250 50  0001 C CNN
	1    3800 1250
	-1   0    0    -1  
$EndComp
$Comp
L Switch:SW_SPST SW?
U 1 1 61CFC310
P 3800 1800
F 0 "SW?" H 3800 1900 50  0000 C CNN
F 1 "INHIBIT4" H 3800 1700 50  0000 C CNN
F 2 "" H 3800 1800 50  0001 C CNN
F 3 "~" H 3800 1800 50  0001 C CNN
	1    3800 1800
	-1   0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 61D08DC1
P 3400 1000
F 0 "R?" V 3300 1000 50  0000 C CNN
F 1 "100R" V 3400 1000 50  0000 C CNN
F 2 "" V 3330 1000 50  0001 C CNN
F 3 "~" H 3400 1000 50  0001 C CNN
	1    3400 1000
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 61D1157A
P 3400 2050
F 0 "R?" V 3300 2050 50  0000 C CNN
F 1 "100R" V 3400 2050 50  0000 C CNN
F 2 "" V 3330 2050 50  0001 C CNN
F 3 "~" H 3400 2050 50  0001 C CNN
	1    3400 2050
	1    0    0    -1  
$EndComp
Text Notes 4350 600  0    50   ~ 0
Balancing and Protections
Wire Notes Line
	4300 500  4300 2550
Wire Notes Line
	11950 500  11950 2550
Text Notes 8550 950  0    30   ~ 0
OUT is pulled high in OV condition, after 3 second delay\nOV is fixed at 4.3V per cell
Wire Notes Line
	4250 2550 4250 500 
Wire Notes Line
	3200 500  3200 2550
Text Notes 3250 600  0    50   ~ 0
Inhibits
$Comp
L Device:Polyfuse F?
U 1 1 61D46630
P 8050 800
F 0 "F?" V 7950 800 50  0000 C CNN
F 1 "7A" V 8150 800 50  0000 C CNN
F 2 "" H 8100 600 50  0001 L CNN
F 3 "~" H 8050 800 50  0001 C CNN
	1    8050 800 
	0    1    1    0   
$EndComp
Text GLabel 900  800  0    50   Input ~ 0
BCR_OUT
Wire Wire Line
	3400 1800 3400 1900
Wire Wire Line
	3400 2200 3400 2250
Connection ~ 3400 2250
Wire Wire Line
	3400 1150 3400 1250
Wire Wire Line
	3400 850  3400 800 
Wire Wire Line
	4000 1100 4000 1250
Wire Wire Line
	4000 1700 4000 1800
Connection ~ 4000 1250
Wire Wire Line
	4000 1250 4000 1350
Wire Wire Line
	3600 1250 3400 1250
Connection ~ 4000 1800
Wire Wire Line
	4000 1800 4000 1950
Wire Wire Line
	3600 1800 3400 1800
Wire Wire Line
	3550 1700 4000 1350
Wire Wire Line
	4000 1700 3550 1350
Connection ~ 7900 2250
$Comp
L Amplifier_Operational:LM358 U?
U 2 1 61DFA6F3
P 5200 1300
F 0 "U?" H 5200 1667 50  0000 C CNN
F 1 "LM358" H 5200 1576 50  0000 C CNN
F 2 "" H 5200 1300 50  0001 C CNN
F 3 "http://www.ti.com/lit/ds/symlink/lm2904-n.pdf" H 5200 1300 50  0001 C CNN
	2    5200 1300
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 61E77D83
P 900 1100
F 0 "R?" H 950 1100 50  0000 L CNN
F 1 "87K" V 900 1100 50  0000 C CNN
F 2 "" V 830 1100 50  0001 C CNN
F 3 "~" H 900 1100 50  0001 C CNN
	1    900  1100
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 61E782F8
P 900 1950
F 0 "R?" H 950 1950 50  0000 L CNN
F 1 "10K" V 900 1950 50  0000 C CNN
F 2 "" V 830 1950 50  0001 C CNN
F 3 "~" H 900 1950 50  0001 C CNN
	1    900  1950
	1    0    0    -1  
$EndComp
Wire Wire Line
	900  800  900  950 
Wire Wire Line
	900  2100 900  2250
Text Label 1350 1500 2    50   ~ 0
TELEM_VBAT
Wire Notes Line
	3150 500  3150 2550
Wire Notes Line
	500  2550 500  500 
Text Notes 550  600  0    50   ~ 0
V and I Telemetry
$Comp
L MCU_ST_STM32F1:STM32F103C8Tx U?
U 1 1 61EF7684
P 9250 4800
F 0 "U?" H 9200 3211 50  0000 C CNN
F 1 "STM32F103C8Tx" H 9200 3120 50  0000 C CNN
F 2 "Package_QFP:LQFP-48_7x7mm_P0.5mm" H 8650 3400 50  0001 R CNN
F 3 "http://www.st.com/st-web-ui/static/active/en/resource/technical/document/datasheet/CD00161566.pdf" H 9250 4800 50  0001 C CNN
	1    9250 4800
	1    0    0    -1  
$EndComp
$Sheet
S 3850 3450 1100 300 
U 62041525
F0 "HBAT2" 50
F1 "Heater+Thermistor.sch" 50
F2 "GATE_TOP" I L 3850 3550 50 
F3 "GATE_BOTTOM" I L 3850 3650 50 
F4 "TELEM_TBAT" I R 4950 3550 50 
$EndSheet
$Sheet
S 3850 3950 1100 300 
U 62045EF1
F0 "HBAT3" 50
F1 "Heater+Thermistor.sch" 50
F2 "GATE_TOP" I L 3850 4050 50 
F3 "GATE_BOTTOM" I L 3850 4150 50 
F4 "TELEM_TBAT" I R 4950 4050 50 
$EndSheet
$Sheet
S 3850 4450 1100 300 
U 6204A8C5
F0 "HBAT4" 50
F1 "Heater+Thermistor.sch" 50
F2 "GATE_TOP" I L 3850 4550 50 
F3 "GATE_BOTTOM" I L 3850 4650 50 
F4 "TELEM_TBAT" I R 4950 4550 50 
$EndSheet
$Sheet
S 3850 2950 1100 300 
U 62026259
F0 "HBAT1" 50
F1 "Heater+Thermistor.sch" 50
F2 "GATE_TOP" I L 3850 3050 50 
F3 "GATE_BOTTOM" I L 3850 3150 50 
F4 "TELEM_TBAT" I R 4950 3050 50 
$EndSheet
$Comp
L Connector_Generic:Conn_02x26_Odd_Even H?
U 1 1 61C799DE
P 1050 5650
AR Path="/61C799DE" Ref="H?"  Part="1" 
AR Path="/61BD4B7D/61C799DE" Ref="H?"  Part="1" 
F 0 "H?" H 1100 7067 50  0000 C CNN
F 1 "Stack Header 2" H 1100 6976 50  0000 C CNN
F 2 "" H 1050 5650 50  0001 C CNN
F 3 "~" H 1050 5650 50  0001 C CNN
	1    1050 5650
	1    0    0    -1  
$EndComp
Text Label 850  6450 2    50   ~ 0
SDA
Text Label 850  6550 2    50   ~ 0
SCL
Text GLabel 1350 5950 2    50   Input ~ 0
VUSB
Text GLabel 2500 4950 2    50   Input ~ 0
SW5
Text GLabel 2000 4950 0    50   Input ~ 0
SW6
Text GLabel 2500 5050 2    50   Input ~ 0
SW7
Text GLabel 2000 5050 0    50   Input ~ 0
SW8
Text GLabel 2500 5150 2    50   Input ~ 0
SW9
Text GLabel 2000 5150 0    50   Input ~ 0
SW10
$Comp
L power:+12V #PWR?
U 1 1 61C799ED
P 2500 5550
AR Path="/61C799ED" Ref="#PWR?"  Part="1" 
AR Path="/61BD4B7D/61C799ED" Ref="#PWR0113"  Part="1" 
F 0 "#PWR0113" H 2500 5400 50  0001 C CNN
F 1 "+12V" V 2515 5678 50  0000 L CNN
F 2 "" H 2500 5550 50  0001 C CNN
F 3 "" H 2500 5550 50  0001 C CNN
	1    2500 5550
	0    1    1    0   
$EndComp
$Comp
L power:+12V #PWR?
U 1 1 61C799F3
P 2000 5550
AR Path="/61C799F3" Ref="#PWR?"  Part="1" 
AR Path="/61BD4B7D/61C799F3" Ref="#PWR0114"  Part="1" 
F 0 "#PWR0114" H 2000 5400 50  0001 C CNN
F 1 "+12V" V 2015 5678 50  0000 L CNN
F 2 "" H 2000 5550 50  0001 C CNN
F 3 "" H 2000 5550 50  0001 C CNN
	1    2000 5550
	0    -1   -1   0   
$EndComp
$Comp
L power:+5V #PWR?
U 1 1 61C799F9
P 2000 5750
AR Path="/61C799F9" Ref="#PWR?"  Part="1" 
AR Path="/61BD4B7D/61C799F9" Ref="#PWR0115"  Part="1" 
F 0 "#PWR0115" H 2000 5600 50  0001 C CNN
F 1 "+5V" V 2015 5878 50  0000 L CNN
F 2 "" H 2000 5750 50  0001 C CNN
F 3 "" H 2000 5750 50  0001 C CNN
	1    2000 5750
	0    -1   -1   0   
$EndComp
$Comp
L power:+5V #PWR?
U 1 1 61C799FF
P 2500 5750
AR Path="/61C799FF" Ref="#PWR?"  Part="1" 
AR Path="/61BD4B7D/61C799FF" Ref="#PWR0116"  Part="1" 
F 0 "#PWR0116" H 2500 5600 50  0001 C CNN
F 1 "+5V" V 2515 5878 50  0000 L CNN
F 2 "" H 2500 5750 50  0001 C CNN
F 3 "" H 2500 5750 50  0001 C CNN
	1    2500 5750
	0    1    1    0   
$EndComp
$Comp
L power:+3V3 #PWR?
U 1 1 61C79A05
P 2000 5850
AR Path="/61C79A05" Ref="#PWR?"  Part="1" 
AR Path="/61BD4B7D/61C79A05" Ref="#PWR0117"  Part="1" 
F 0 "#PWR0117" H 2000 5700 50  0001 C CNN
F 1 "+3V3" V 2015 5978 50  0000 L CNN
F 2 "" H 2000 5850 50  0001 C CNN
F 3 "" H 2000 5850 50  0001 C CNN
	1    2000 5850
	0    -1   -1   0   
$EndComp
$Comp
L power:+3V3 #PWR?
U 1 1 61C79A0B
P 2500 5850
AR Path="/61C79A0B" Ref="#PWR?"  Part="1" 
AR Path="/61BD4B7D/61C79A0B" Ref="#PWR0118"  Part="1" 
F 0 "#PWR0118" H 2500 5700 50  0001 C CNN
F 1 "+3V3" V 2515 5978 50  0000 L CNN
F 2 "" H 2500 5850 50  0001 C CNN
F 3 "" H 2500 5850 50  0001 C CNN
	1    2500 5850
	0    1    1    0   
$EndComp
Text GLabel 2500 6150 2    50   Input ~ 0
PCM_IN
Text GLabel 2000 6150 0    50   Input ~ 0
PCM_IN
Text GLabel 2500 6450 2    50   Input ~ 0
BCR_OUT
Text GLabel 2000 6450 0    50   Input ~ 0
BCR_OUT
Text GLabel 2500 6550 2    50   Input ~ 0
BCR_OUT
Text GLabel 2000 6550 0    50   Input ~ 0
BCR_OUT
$Comp
L power:+BATT #PWR?
U 1 1 61C79A17
P 2500 5650
AR Path="/61C79A17" Ref="#PWR?"  Part="1" 
AR Path="/61BD4B7D/61C79A17" Ref="#PWR0119"  Part="1" 
F 0 "#PWR0119" H 2500 5500 50  0001 C CNN
F 1 "+BATT" V 2515 5778 50  0000 L CNN
F 2 "" H 2500 5650 50  0001 C CNN
F 3 "" H 2500 5650 50  0001 C CNN
	1    2500 5650
	0    1    1    0   
$EndComp
$Comp
L power:+BATT #PWR?
U 1 1 61C79A1D
P 2000 5650
AR Path="/61C79A1D" Ref="#PWR?"  Part="1" 
AR Path="/61BD4B7D/61C79A1D" Ref="#PWR0120"  Part="1" 
F 0 "#PWR0120" H 2000 5500 50  0001 C CNN
F 1 "+BATT" V 2015 5778 50  0000 L CNN
F 2 "" H 2000 5650 50  0001 C CNN
F 3 "" H 2000 5650 50  0001 C CNN
	1    2000 5650
	0    -1   -1   0   
$EndComp
NoConn ~ 2000 6850
NoConn ~ 2000 6950
NoConn ~ 2500 6850
NoConn ~ 2500 6950
NoConn ~ 2000 6250
NoConn ~ 2000 6350
NoConn ~ 2500 6250
NoConn ~ 2500 6350
NoConn ~ 2500 6050
NoConn ~ 2000 6050
NoConn ~ 2000 4550
NoConn ~ 2000 4450
NoConn ~ 2500 4450
NoConn ~ 2500 4550
Wire Wire Line
	2000 6650 1600 6650
Wire Wire Line
	1600 5450 2000 5450
Wire Wire Line
	2000 5950 1600 5950
Connection ~ 1600 5450
Wire Wire Line
	2500 6650 2900 6650
Wire Wire Line
	2500 5950 2900 5950
Wire Wire Line
	2900 5450 2500 5450
Connection ~ 2900 5450
Wire Wire Line
	1600 7000 2250 7000
$Comp
L power:GND #PWR?
U 1 1 61C79A3A
P 2250 7000
AR Path="/61C79A3A" Ref="#PWR?"  Part="1" 
AR Path="/61BD4B7D/61C79A3A" Ref="#PWR0121"  Part="1" 
F 0 "#PWR0121" H 2250 6750 50  0001 C CNN
F 1 "GND" H 2255 6827 50  0000 C CNN
F 2 "" H 2250 7000 50  0001 C CNN
F 3 "" H 2250 7000 50  0001 C CNN
	1    2250 7000
	1    0    0    -1  
$EndComp
Connection ~ 2250 7000
Wire Wire Line
	2250 7000 2900 7000
Text GLabel 2500 4850 2    50   Input ~ 0
SW4
Text GLabel 2000 4850 0    50   Input ~ 0
SW3
Text GLabel 2500 4750 2    50   Input ~ 0
SW2
Text GLabel 2000 4750 0    50   Input ~ 0
SW1
Text GLabel 2500 5250 2    50   Input ~ 0
SW11
Text GLabel 2500 5350 2    50   Input ~ 0
SW13
Text GLabel 2000 5250 0    50   Input ~ 0
SW12
Text GLabel 2000 5350 0    50   Input ~ 0
SW14
$Comp
L Connector_Generic:Conn_02x26_Odd_Even H?
U 1 1 61C79A4A
P 2200 5650
AR Path="/61C79A4A" Ref="H?"  Part="1" 
AR Path="/61BD4B7D/61C79A4A" Ref="H?"  Part="1" 
F 0 "H?" H 2250 7067 50  0000 C CNN
F 1 "Stack Header 1" H 2250 6976 50  0000 C CNN
F 2 "" H 2200 5650 50  0001 C CNN
F 3 "~" H 2200 5650 50  0001 C CNN
	1    2200 5650
	1    0    0    -1  
$EndComp
Wire Wire Line
	2900 4650 2500 4650
Wire Wire Line
	2900 4650 2900 5450
Wire Wire Line
	2000 4650 1600 4650
Wire Wire Line
	1600 4650 1600 5450
Connection ~ 1600 5950
Wire Wire Line
	1600 5950 1600 6650
Wire Wire Line
	1600 5450 1600 5950
Connection ~ 2900 5950
Wire Wire Line
	2900 5950 2900 6650
Wire Wire Line
	2900 5450 2900 5950
Connection ~ 2900 6650
Wire Wire Line
	2900 6650 2900 7000
Connection ~ 1600 6650
Wire Wire Line
	1600 6650 1600 7000
NoConn ~ 2500 6750
NoConn ~ 2000 6750
$Comp
L Device:Polyfuse F?
U 1 1 61C906DB
P 7750 800
F 0 "F?" V 7650 800 50  0000 C CNN
F 1 "7A" V 7850 800 50  0000 C CNN
F 2 "" H 7800 600 50  0001 L CNN
F 3 "~" H 7750 800 50  0001 C CNN
	1    7750 800 
	0    1    1    0   
$EndComp
Wire Wire Line
	7900 800  7900 1200
Connection ~ 7900 800 
Wire Wire Line
	8450 800  8200 800 
Wire Wire Line
	7900 2250 8450 2250
$Comp
L Device:C C?
U 1 1 61C50B13
P 9800 2100
F 0 "C?" H 9915 2146 50  0000 L CNN
F 1 "0.33uF" H 9915 2055 50  0000 L CNN
F 2 "" H 9838 1950 50  0001 C CNN
F 3 "~" H 9800 2100 50  0001 C CNN
	1    9800 2100
	1    0    0    -1  
$EndComp
Text Notes 7500 1050 0    30   ~ 0
Semidestructive protection in case \nOVP exists for more than 3 seconds
$Comp
L Power_Management:LTC4365TS8-1 U?
U 1 1 61CCDB44
P 6850 1600
F 0 "U?" H 7150 2050 50  0000 C CNN
F 1 "LTC4365TS8-1" H 7150 1950 50  0000 C CNN
F 2 "" H 6550 1850 50  0001 C CNN
F 3 "https://www.analog.com/media/en/technical-documentation/data-sheets/4365fa.pdf" H 6850 1700 50  0001 C CNN
	1    6850 1600
	1    0    0    -1  
$EndComp
Wire Wire Line
	6450 1400 6450 800 
$Comp
L Transistor_FET:Si4162DY Q?
U 1 1 61CE23E4
P 6850 900
F 0 "Q?" V 7200 900 50  0000 C CNN
F 1 "Si4186DY" V 7100 900 50  0000 C CNN
F 2 "Package_SO:SOIC-8_3.9x4.9mm_P1.27mm" H 7050 800 50  0001 L CNN
F 3 "http://www.vishay.com/docs/68967/si4162dy.pdf" H 6850 900 50  0001 L CNN
	1    6850 900 
	0    -1   -1   0   
$EndComp
Connection ~ 6450 800 
Wire Wire Line
	6450 800  6300 800 
Wire Wire Line
	6450 800  6650 800 
Wire Wire Line
	7050 800  7450 800 
Wire Wire Line
	7250 1400 7450 1400
Wire Wire Line
	7450 1400 7450 800 
Connection ~ 7450 800 
Wire Wire Line
	7450 800  7600 800 
$Comp
L Device:R R?
U 1 1 61D107CC
P 6300 1350
F 0 "R?" H 6350 1350 50  0000 L CNN
F 1 "100K" V 6300 1350 50  0000 C CNN
F 2 "" V 6230 1350 50  0001 C CNN
F 3 "~" H 6300 1350 50  0001 C CNN
	1    6300 1350
	1    0    0    -1  
$EndComp
Wire Wire Line
	6450 1500 6300 1500
Wire Wire Line
	6300 1200 6300 800 
Connection ~ 6300 800 
Wire Wire Line
	6300 800  6150 800 
Wire Wire Line
	6300 1500 6300 1700
Wire Wire Line
	6300 1700 6450 1700
Connection ~ 6300 1500
$Comp
L Device:R R?
U 1 1 61D28F2B
P 6150 1650
F 0 "R?" H 6200 1650 50  0000 L CNN
F 1 "790K" V 6150 1650 50  0000 C CNN
F 2 "" V 6080 1650 50  0001 C CNN
F 3 "~" H 6150 1650 50  0001 C CNN
	1    6150 1650
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 61D33E6E
P 6150 1950
F 0 "R?" H 6200 1950 50  0000 L CNN
F 1 "50K" V 6150 1950 50  0000 C CNN
F 2 "" V 6080 1950 50  0001 C CNN
F 3 "~" H 6150 1950 50  0001 C CNN
	1    6150 1950
	1    0    0    -1  
$EndComp
Wire Wire Line
	6150 1500 6150 800 
Wire Wire Line
	4400 800  4200 800 
Wire Wire Line
	6150 1800 6450 1800
Connection ~ 6150 1800
Wire Wire Line
	6150 2100 6150 2250
Wire Wire Line
	4400 2250 4200 2250
Wire Wire Line
	6150 2250 6850 2250
Wire Wire Line
	6850 2000 6850 2250
Connection ~ 6850 2250
Wire Wire Line
	6850 2250 7900 2250
Wire Wire Line
	8450 1900 8450 2250
Connection ~ 8450 1450
Wire Wire Line
	8450 1450 8450 1600
$Comp
L Device:C C?
U 1 1 61C614D1
P 8450 1750
F 0 "C?" H 8565 1796 50  0000 L CNN
F 1 "0.1uF" H 8565 1705 50  0000 L CNN
F 2 "" H 8488 1600 50  0001 C CNN
F 3 "~" H 8450 1750 50  0001 C CNN
	1    8450 1750
	1    0    0    -1  
$EndComp
Wire Wire Line
	1900 1200 1900 1400
Connection ~ 1900 1200
Text Notes 2700 1200 0    50   ~ 0
200mV/A
$Comp
L Device:R R?
U 1 1 61D60992
P 1700 800
F 0 "R?" V 1600 800 50  0000 C CNN
F 1 "10m" V 1700 800 50  0000 C CNN
F 2 "" V 1630 800 50  0001 C CNN
F 3 "~" H 1700 800 50  0001 C CNN
	1    1700 800 
	0    1    1    0   
$EndComp
Connection ~ 1550 800 
$Comp
L Amplifier_Current:LT6106 U?
U 1 1 61D62B56
P 2200 1300
F 0 "U?" H 2544 1346 50  0000 L CNN
F 1 "LT6106" H 2544 1255 50  0000 L CNN
F 2 "Package_TO_SOT_SMD:SOT-23-5" H 2200 1300 50  0001 C CNN
F 3 "https://www.analog.com/media/en/technical-documentation/data-sheets/6106fb.pdf" H 2250 1500 50  0001 C CNN
	1    2200 1300
	1    0    0    -1  
$EndComp
Connection ~ 2500 1300
Connection ~ 2100 1600
Wire Wire Line
	1900 1200 1900 900 
Wire Wire Line
	1550 800  1500 900 
Wire Wire Line
	1500 900  1500 1000
Connection ~ 1500 1000
Wire Wire Line
	1500 1000 2100 1000
Wire Wire Line
	1500 1000 1500 1400
Connection ~ 1500 1400
Wire Wire Line
	1900 900  1850 800 
$Comp
L Device:R R?
U 1 1 61DB450C
P 2500 1450
F 0 "R?" H 2550 1450 50  0000 L CNN
F 1 "2K" V 2500 1400 50  0000 L CNN
F 2 "" V 2430 1450 50  0001 C CNN
F 3 "~" H 2500 1450 50  0001 C CNN
	1    2500 1450
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 61DB77A8
P 1750 1400
F 0 "R?" V 1650 1400 50  0000 C CNN
F 1 "100R" V 1750 1400 50  0000 C CNN
F 2 "" V 1680 1400 50  0001 C CNN
F 3 "~" H 1750 1400 50  0001 C CNN
	1    1750 1400
	0    1    1    0   
$EndComp
Wire Wire Line
	1600 1400 1500 1400
Text Label 3100 1300 2    50   ~ 0
TELEM_IBAT
Wire Wire Line
	2500 1300 3100 1300
Wire Wire Line
	1550 800  1450 800 
Wire Wire Line
	1500 1850 1500 1400
Text Notes 2100 2200 0    30   ~ 0
ROUTE CAREFULLY!\n0.15mV error is enough to be problematic
Wire Wire Line
	1450 2250 1450 2100
Wire Wire Line
	2100 2250 1450 2250
Text Notes 2450 1850 0    50   ~ 0
If high, charging, \nelse discharging
Text Label 3100 1950 2    50   ~ 0
TELEM_IBATDIR
Wire Wire Line
	2500 1950 3100 1950
Wire Wire Line
	1900 1850 1500 1850
Wire Wire Line
	1450 1500 1450 800 
$Comp
L Amplifier_Operational:LM358 U?
U 3 1 61DFB4D1
P 1550 1800
F 0 "U?" H 1250 1850 50  0000 L CNN
F 1 "LM358" H 1150 1750 50  0000 L CNN
F 2 "" H 1550 1800 50  0001 C CNN
F 3 "http://www.ti.com/lit/ds/symlink/lm2904-n.pdf" H 1550 1800 50  0001 C CNN
	3    1550 1800
	1    0    0    -1  
$EndComp
$Comp
L Amplifier_Operational:LM358 U?
U 1 1 61DF7B43
P 2200 1950
F 0 "U?" H 2200 2250 50  0000 C CNN
F 1 "LM358" H 2200 2150 50  0000 C CNN
F 2 "" H 2200 1950 50  0001 C CNN
F 3 "http://www.ti.com/lit/ds/symlink/lm2904-n.pdf" H 2200 1950 50  0001 C CNN
	1    2200 1950
	1    0    0    -1  
$EndComp
Wire Wire Line
	2100 2250 2100 1600
Wire Wire Line
	2100 1600 2500 1600
Connection ~ 1900 1400
Connection ~ 1450 800 
Wire Wire Line
	3550 2250 3400 2250
Connection ~ 1450 2250
$Comp
L Device:D_Zener D?
U 1 1 6219A2CF
P 4400 1950
F 0 "D?" V 4354 2030 50  0000 L CNN
F 1 "1.2V zener" V 4445 2030 50  0000 L CNN
F 2 "" H 4400 1950 50  0001 C CNN
F 3 "~" H 4400 1950 50  0001 C CNN
	1    4400 1950
	0    1    1    0   
$EndComp
Wire Wire Line
	900  1250 900  1500
Wire Wire Line
	1350 1500 900  1500
Connection ~ 900  1500
Wire Wire Line
	900  1500 900  1800
Wire Wire Line
	900  2250 1450 2250
Wire Wire Line
	900  800  1450 800 
$Comp
L Device:R R?
U 1 1 621D5836
P 4400 1250
F 0 "R?" H 4450 1250 50  0000 L CNN
F 1 "100K" V 4400 1150 50  0000 L CNN
F 2 "" V 4330 1250 50  0001 C CNN
F 3 "~" H 4400 1250 50  0001 C CNN
	1    4400 1250
	1    0    0    -1  
$EndComp
Wire Notes Line
	4250 2550 3200 2550
Wire Notes Line
	3200 500  4250 500 
Wire Wire Line
	3400 800  1850 800 
Connection ~ 3400 800 
Connection ~ 1850 800 
Wire Wire Line
	2100 2250 3400 2250
Connection ~ 2100 2250
Wire Wire Line
	4400 2250 4400 2100
Wire Wire Line
	4400 1800 4400 1400
Wire Wire Line
	4400 1100 4400 800 
Connection ~ 4400 1400
Text Label 4500 1200 0    50   ~ 0
TELEM_IBAT
Wire Wire Line
	4500 1200 4900 1200
Wire Wire Line
	4400 800  5300 800 
Wire Wire Line
	6850 1100 6850 1200
Connection ~ 6150 2250
$Comp
L Transistor_FET:IRF7404 Q?
U 1 1 622A211E
P 5500 900
F 0 "Q?" V 5842 900 50  0000 C CNN
F 1 "IRF7425" V 5751 900 50  0000 C CNN
F 2 "Package_SO:SOIC-8_3.9x4.9mm_P1.27mm" H 5700 825 50  0001 L CIN
F 3 "http://www.infineon.com/dgdl/irf7404.pdf?fileId=5546d462533600a4015355fa2b5b1b9e" V 5500 900 50  0001 L CNN
	1    5500 900 
	0    1    -1   0   
$EndComp
Connection ~ 4400 800 
Wire Wire Line
	5500 1300 5500 1100
Wire Wire Line
	4400 2250 6150 2250
Connection ~ 4400 2250
Wire Notes Line
	4300 2550 11950 2550
Wire Notes Line
	4300 500  11950 500 
Text Notes 4900 1650 0    50   ~ 0
~~6A Bidirectional OCP
Wire Notes Line
	3150 2550 500  2550
Wire Notes Line
	500  500  3150 500 
$Comp
L Transistor_FET:IRF7404 Q?
U 1 1 61CCE42A
P 5900 900
F 0 "Q?" V 6242 900 50  0000 C CNN
F 1 "IRF7425" V 6151 900 50  0000 C CNN
F 2 "Package_SO:SOIC-8_3.9x4.9mm_P1.27mm" H 6100 825 50  0001 L CIN
F 3 "http://www.infineon.com/dgdl/irf7404.pdf?fileId=5546d462533600a4015355fa2b5b1b9e" V 5900 900 50  0001 L CNN
	1    5900 900 
	0    -1   -1   0   
$EndComp
Wire Wire Line
	4400 1400 4900 1400
Wire Wire Line
	5900 1100 5900 1300
Wire Wire Line
	5900 1300 5500 1300
Connection ~ 5500 1300
Wire Wire Line
	6150 800  6100 800 
Connection ~ 6150 800 
$EndSCHEMATC
